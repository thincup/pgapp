(function(){"use strict";jQuery.externalScript=function(e,r){return r=$.extend(r||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(r)};var e;(e=$('meta[name="stripe-key"]').attr("content"))&&$.externalScript("https://js.stripe.com/v2/").done(function(r,t){var i,n;return Stripe.setPublishableKey(e),i=$("#payment-form"),n={setupForm:function(){return i.submit(function(){return i.find("input[type=submit]").prop("disabled",!0).removeClass("disabled"),$("#creditcard-number").length?(n.processCard(),!1):!0})},processCard:function(){var e,r;return r=$("#creditcard-expiry").val().replace(/\s/g,""),e={name:$.trim($("#creditcard-name").val()),number:$.trim($("#creditcard-number").val()),cvc:$.trim($("#creditcard-cvc").val()),exp_month:$.trim(r.split("/")[0]),exp_year:$.trim(r.split("/")[1])},Stripe.createToken(e,n.handleStripeResponse),$("#loaded").hide()},handleStripeResponse:function(e,r){var t;return r.error?(i.find(".payment-errors").text(r.error.message).show(),i.find("[type=submit]").prop("disabled",!1).removeClass("disabled"),$("#loaded").show()):(t=r.id,i.find("input[name='stripe_token']").val(t),i[0].submit())}},n.setupForm()})}).call(this);